1688112584
da8df4e7f502dc9ea26bc906a670dcb8-AwuilbDvXz%3A8b72280a63d4825dca59fccc7094c28a-78177586fa912ac34f8644b20f1bbeba
s:45796:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6Ijc4MTc3NTg2ZmE5MTJhYzM0Zjg2NDRiMjBmMWJiZWJhIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6NTA6ImNsYXNzLWNvbmZldHRpLWJpdHMtcmVzdC10cmFuc2FjdGlvbnMtZW5kcG9pbnQucGhwIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6NzQ6ImNiLXRyYW5zYWN0aW9ucy9jbGFzc2VzL2NsYXNzLWNvbmZldHRpLWJpdHMtcmVzdC10cmFuc2FjdGlvbnMtZW5kcG9pbnQucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czozMzM1MjoiPD9waHAKCi8qCgpmdW5jdGlvbnMgd2UgbmVlZDoKY2JfcmVzdF90cmFuc2FjdGlvbl9kZWZhdWx0X3Njb3BlCmNiX3RyYW5zYWN0aW9uX2dldCAoY2JfdHJhbnNhY3Rpb25fZ2V0KQpjYl9yZXN0X3Jlc3BvbnNlX2FkZF90b3RhbF9oZWFkZXJzCmNiX3RyYW5zYWN0aW9uX3Bvc3RfdXBkYXRlIChjYl90cmFuc2FjdGlvbl9wb3N0X3VwZGF0ZSkKY2JfdHJhbnNhY3Rpb25fdXNlcl9jYW5fZGVsZXRlIChjYl90cmFuc2FjdGlvbl91c2VyX2Nhbl9kZWxldGUpCmNiX3RyYW5zYWN0aW9uX2dldF9zcGVjaWZpYyAoY2JfdHJhbnNhY3Rpb25fZ2V0X3NwZWNpZmljKQpjYl90cmFuc2FjdGlvbl9kZWxldGUgKGNiX3RyYW5zYWN0aW9uX2RlbGV0ZSkKY2JfdHJhbnNhY3Rpb25fZ2V0X3Blcm1hbGluawoKKi8KCi8qLwpjbGFzcyBDb25mZXR0aV9CaXRzX1JFU1RfVHJhbnNhY3Rpb25zX0VuZHBvaW50IGV4dGVuZHMgV1BfUkVTVF9Db250cm9sbGVyCnsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCSR0aGlzLT5uYW1lc3BhY2UgPSBjYl9yZXN0X25hbWVzcGFjZSgpIC4gJy8nIC4gY2JfcmVzdF92ZXJzaW9uKCk7CgkJJHRoaXMtPnJlc3RfYmFzZSA9IENvbmZldHRpX0JpdHMoKS0+dHJhbnNhY3Rpb25zLT5pZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gcmVnaXN0ZXJfcm91dGVzKCkKCXsKCQlyZWdpc3Rlcl9yZXN0X3JvdXRlKAoJCQkkdGhpcy0+bmFtZXNwYWNlLAoJCQknLycgLiAkdGhpcy0+cmVzdF9iYXNlLAoJCQlhcnJheSgKCQkJCWFycmF5KAoJCQkJCSdtZXRob2RzJyA9PiBXUF9SRVNUX1NlcnZlcjo6UkVBREFCTEUsCgkJCQkJJ2NhbGxiYWNrJyA9PiBhcnJheSgkdGhpcywgJ2dldF9pdGVtcycpLAoJCQkJCSdwZXJtaXNzaW9uX2NhbGxiYWNrJyA9PiBhcnJheSgkdGhpcywgJ2dldF9pdGVtc19wZXJtaXNzaW9uc19jaGVjaycpLAoJCQkJCSdhcmdzJyA9PiAkdGhpcy0+Z2V0X2NvbGxlY3Rpb25fcGFyYW1zKCksCgkJCQkpLAoJCQkJYXJyYXkoCgkJCQkJJ21ldGhvZHMnID0+IFdQX1JFU1RfU2VydmVyOjpDUkVBVEFCTEUsCgkJCQkJJ2NhbGxiYWNrJyA9PiBhcnJheSgkdGhpcywgJ2NyZWF0ZV9pdGVtJyksCgkJCQkJJ3Blcm1pc3Npb25fY2FsbGJhY2snID0+IGFycmF5KCR0aGlzLCAnY3JlYXRlX2l0ZW1fcGVybWlzc2lvbnNfY2hlY2snKSwKCQkJCQknYXJncycgPT4gJHRoaXMtPmdldF9lbmRwb2ludF9hcmdzX2Zvcl9pdGVtX3NjaGVtYShXUF9SRVNUX1NlcnZlcjo6Q1JFQVRBQkxFKSwKCQkJCSksCgkJCQknc2NoZW1hJyA9PiBhcnJheSgkdGhpcywgJ2dldF9pdGVtX3NjaGVtYScpLAoJCQkpCgkJKTsKCgkJJHRyYW5zYWN0aW9uX2VuZHBvaW50ID0gJy8nIC4gJHRoaXMtPnJlc3RfYmFzZSAuICcvKD9QPGlkPltcZF0rKSc7CgoJCXJlZ2lzdGVyX3Jlc3Rfcm91dGUoCgkJCSR0aGlzLT5uYW1lc3BhY2UsCgkJCSR0cmFuc2FjdGlvbl9lbmRwb2ludCwKCQkJYXJyYXkoCgkJCQknYXJncycgPT4gYXJyYXkoCgkJCQkJJ2lkJyA9PiBhcnJheSgKCQkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnQSB1bmlxdWUgbnVtZXJpYyBJRCBmb3IgdGhlIHRyYW5zYWN0aW9uLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJCSd0eXBlJyA9PiAnaW50ZWdlcicsCgkJCQkJKSwKCQkJCSksCgkJCQlhcnJheSgKCQkJCQknbWV0aG9kcycgPT4gV1BfUkVTVF9TZXJ2ZXI6OlJFQURBQkxFLAoJCQkJCSdjYWxsYmFjaycgPT4gYXJyYXkoJHRoaXMsICdnZXRfaXRlbScpLAoJCQkJCSdwZXJtaXNzaW9uX2NhbGxiYWNrJyA9PiBhcnJheSgkdGhpcywgJ2dldF9pdGVtX3Blcm1pc3Npb25zX2NoZWNrJyksCgkJCQkJJ2FyZ3MnID0+IGFycmF5KAoJCQkJCQknY29udGV4dCcgPT4gJHRoaXMtPmdldF9jb250ZXh0X3BhcmFtKAoJCQkJCQkJYXJyYXkoCgkJCQkJCQkJJ2RlZmF1bHQnID0+ICd2aWV3JywKCQkJCQkJCSkKCQkJCQkJKSwKCQkJCQkpLAoJCQkJKSwKCQkJCWFycmF5KAoJCQkJCSdtZXRob2RzJyA9PiBXUF9SRVNUX1NlcnZlcjo6RURJVEFCTEUsCgkJCQkJJ2NhbGxiYWNrJyA9PiBhcnJheSgkdGhpcywgJ3VwZGF0ZV9pdGVtJyksCgkJCQkJJ3Blcm1pc3Npb25fY2FsbGJhY2snID0+IGFycmF5KCR0aGlzLCAndXBkYXRlX2l0ZW1fcGVybWlzc2lvbnNfY2hlY2snKSwKCQkJCQknYXJncycgPT4gJHRoaXMtPmdldF9lbmRwb2ludF9hcmdzX2Zvcl9pdGVtX3NjaGVtYShXUF9SRVNUX1NlcnZlcjo6RURJVEFCTEUpLAoJCQkJKSwKCQkJCWFycmF5KAoJCQkJCSdtZXRob2RzJyA9PiBXUF9SRVNUX1NlcnZlcjo6REVMRVRBQkxFLAoJCQkJCSdjYWxsYmFjaycgPT4gYXJyYXkoJHRoaXMsICdkZWxldGVfaXRlbScpLAoJCQkJCSdwZXJtaXNzaW9uX2NhbGxiYWNrJyA9PiBhcnJheSgkdGhpcywgJ2RlbGV0ZV9pdGVtX3Blcm1pc3Npb25zX2NoZWNrJyksCgkJCQkpLAoJCQkJJ3NjaGVtYScgPT4gYXJyYXkoJHRoaXMsICdnZXRfaXRlbV9zY2hlbWEnKSwKCQkJKQoJCSk7Cgl9CgoJLyoqCgkgKiBSZXRyaWV2ZSBhY3Rpdml0aWVzLgoJICoKCSAqIEBwYXJhbSBXUF9SRVNUX1JlcXVlc3QgJHJlcXVlc3QgRnVsbCBkZXRhaWxzIGFib3V0IHRoZSByZXF1ZXN0LgoJICoKCSAqIEByZXR1cm4gV1BfUkVTVF9SZXNwb25zZSB8IFdQX0Vycm9yCgkgKiBAc2luY2UgMC4xLjAKCSAqCgkgKiBAYXBpIHtHRVR9IC93cC1qc29uL2NvbmZldHRpLWJpdHMvdjEvdHJhbnNhY3Rpb24gR2V0IEFjdGl2aXRpZXMKCSAqIEBhcGlOYW1lIEdldENCVHJhbnNjdGlvbnMKCSAqIEBhcGlHcm91cCBUcmFuc2FjdGlvbnMKCSAqIEBhcGlEZXNjcmlwdGlvbiBSZXRyaWV2ZSB0cmFuc2FjdGlvbnMKCSAqIEBhcGlWZXJzaW9uIDEuMC4wCgkgKiBAYXBpUGVybWlzc2lvbiBMb2dnZWRJblVzZXIgaWYgdGhlIHNpdGUgaXMgaW4gUHJpdmF0ZSBOZXR3b3JrLgoJICogQGFwaVBhcmFtIHtOdW1iZXJ9IFtwYWdlXSBDdXJyZW50IHBhZ2Ugb2YgdGhlIGNvbGxlY3Rpb24uCgkgKiBAYXBpUGFyYW0ge051bWJlcn0gW3Blcl9wYWdlPTEwXSBNYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byBiZSByZXR1cm5lZCBpbiByZXN1bHQgc2V0LgoJICogQGFwaVBhcmFtIHtTdHJpbmd9IFtzZWFyY2hdIExpbWl0IHJlc3VsdHMgdG8gdGhvc2UgbWF0Y2hpbmcgYSBzdHJpbmcuCgkgKiBAYXBpUGFyYW0ge0FycmF5fSBbZXhjbHVkZV0gRW5zdXJlIHJlc3VsdCBzZXQgZXhjbHVkZXMgc3BlY2lmaWMgSURzLgoJICogQGFwaVBhcmFtIHtBcnJheX0gW2luY2x1ZGVdIEVuc3VyZSByZXN1bHQgc2V0IGluY2x1ZGVzIHNwZWNpZmljIElEcy4KCSAqIEBhcGlQYXJhbSB7QXJyYXk9YXNjLGRlc2N9IFtvcmRlcj1kZXNjXSBFbnN1cmUgcmVzdWx0IHNldCBpbmNsdWRlcyBzcGVjaWZpYyBJRHMuCgkgKiBAYXBpUGFyYW0ge1N0cmluZ30gW2FmdGVyXSBMaW1pdCByZXN1bHQgc2V0IHRvIGl0ZW1zIHB1Ymxpc2hlZCBhZnRlciBhIGdpdmVuIElTTzg2MDEgY29tcGxpYW50IGRhdGUuCgkgKiBAYXBpUGFyYW0ge051bWJlcn0gW3VzZXJfaWRdIExpbWl0IHJlc3VsdCBzZXQgdG8gaXRlbXMgY3JlYXRlZCBieSBhIHNwZWNpZmljIHVzZXIgKElEKS4KCSAqIEBhcGlQYXJhbSB7U3RyaW5nPWp1c3QtbWUsZnJpZW5kcyxncm91cHMsZmF2b3JpdGVzLG1lbnRpb25zLGZvbGxvd2luZ30gW3Njb3BlXSBMaW1pdCByZXN1bHQgc2V0IHRvIGl0ZW1zIHdpdGggYSBzcGVjaWZpYyBzY29wZS4KCSAqIEBhcGlQYXJhbSB7TnVtYmVyfSBbcHJpbWFyeV9pZF0gTGltaXQgcmVzdWx0IHNldCB0byBpdGVtcyB3aXRoIGEgc3BlY2lmaWMgcHJpbWUgYXNzb2NpYXRpb24gSUQuCgkgKiBAYXBpUGFyYW0ge051bWJlcn0gW3NlY29uZGFyeV9pZF0gTGltaXQgcmVzdWx0IHNldCB0byBpdGVtcyB3aXRoIGEgc3BlY2lmaWMgc2Vjb25kYXJ5IGFzc29jaWF0aW9uIElELgoJICogQGFwaVBhcmFtIHtTdHJpbmd9IFtjb21wb25lbnRdIExpbWl0IHJlc3VsdCBzZXQgdG8gaXRlbXMgd2l0aCBhIHNwZWNpZmljIGFjdGl2ZSBjb21wb25lbnQuCgkgKiBAYXBpUGFyYW0ge1N0cmluZ30gW3R5cGVdIExpbWl0IHJlc3VsdCBzZXQgdG8gaXRlbXMgd2l0aCBhIHNwZWNpZmljIHRyYW5zYWN0aW9uIHR5cGUuCgkgKi8KLyovCglwdWJsaWMgZnVuY3Rpb24gZ2V0X2l0ZW1zKCRyZXF1ZXN0KQoJewoJCSRhcmdzID0gYXJyYXkoCgkJCSdleGNsdWRlJyA9PiAkcmVxdWVzdFsnZXhjbHVkZSddLAoJCQknaW4nID0+ICRyZXF1ZXN0WydpbmNsdWRlJ10sCgkJCSdwYWdlJyA9PiAkcmVxdWVzdFsncGFnZSddLAoJCQkncGVyX3BhZ2UnID0+ICRyZXF1ZXN0WydwZXJfcGFnZSddLAoJCQknc2VhcmNoX3Rlcm1zJyA9PiAkcmVxdWVzdFsnc2VhcmNoJ10sCgkJCSdzb3J0JyA9PiAkcmVxdWVzdFsnb3JkZXInXSwKCQkJJ3NwYW0nID0+ICRyZXF1ZXN0WydzdGF0dXMnXSwKCQkJJ3Njb3BlJyA9PiAkcmVxdWVzdFsnc2NvcGUnXSwKCQkJJ2NvdW50X3RvdGFsJyA9PiB0cnVlLAoJCQknZmllbGRzJyA9PiAnYWxsJywKCQkJJ3Nob3dfaGlkZGVuJyA9PiBmYWxzZSwKCQkJJ3VwZGF0ZV9tZXRhX2NhY2hlJyA9PiB0cnVlLAoJCQknZmlsdGVyJyA9PiBmYWxzZSwKCQkpOwoKCQlpZiAoZW1wdHkoJHJlcXVlc3RbJ2V4Y2x1ZGUnXSkpIHsKCQkJJGFyZ3NbJ2V4Y2x1ZGUnXSA9IGZhbHNlOwoJCX0KCgkJaWYgKGVtcHR5KCRyZXF1ZXN0WydpbmNsdWRlJ10pKSB7CgkJCSRhcmdzWydpbiddID0gZmFsc2U7CgkJfQoKCQlpZiAoaXNzZXQoJHJlcXVlc3RbJ2FmdGVyJ10pKSB7CgkJCSRhcmdzWydzaW5jZSddID0gJHJlcXVlc3RbJ2FmdGVyJ107CgkJfQoKCQlpZiAoaXNzZXQoJHJlcXVlc3RbJ3VzZXJfaWQnXSkpIHsKCQkJJGFyZ3NbJ2ZpbHRlciddWyd1c2VyX2lkJ10gPSAkcmVxdWVzdFsndXNlcl9pZCddOwoJCX0KCgkJJGl0ZW1faWQgPSAwOwoKCQlpZiAoZW1wdHkoJHJlcXVlc3RbJ3Njb3BlJ10pKSB7CgkJCSRhcmdzWydzY29wZSddID0gZmFsc2U7CgkJfQoKCQlpZiAoaXNzZXQoJHJlcXVlc3RbJ3R5cGUnXSkpIHsKCQkJJGFyZ3NbJ2ZpbHRlciddWydhY3Rpb24nXSA9ICRyZXF1ZXN0Wyd0eXBlJ107CgkJfQoKCQlpZiAoIWVtcHR5KCRyZXF1ZXN0WydzZWNvbmRhcnlfaWQnXSkpIHsKCQkJJGFyZ3NbJ2ZpbHRlciddWydzZWNvbmRhcnlfaWQnXSA9ICRyZXF1ZXN0WydzZWNvbmRhcnlfaWQnXTsKCQl9CgoJCWlmICgkYXJnc1snaW4nXSkgewoJCQkkYXJnc1snY291bnRfdG90YWwnXSA9IGZhbHNlOwoJCX0KCgkJJGFyZ3NbJ3Njb3BlJ10gPSAkdGhpcy0+Y2JfcmVzdF90cmFuc2FjdGlvbl9kZWZhdWx0X3Njb3BlKCRhcmdzWydzY29wZSddLCAoJHJlcXVlc3RbJ3VzZXJfaWQnXSA/ICRyZXF1ZXN0Wyd1c2VyX2lkJ10gOiAwKSwgJGFyZ3NbJ2dyb3VwX2lkJ10pOwoKCQkkYXJncyA9IGFwcGx5X2ZpbHRlcnMoJ2NiX3Jlc3RfdHJhbnNhY3Rpb25fZ2V0X2l0ZW1zX3F1ZXJ5X2FyZ3MnLCAkYXJncywgJHJlcXVlc3QpOwoKCQkvLyBBY3R1YWxseSwgcXVlcnkgaXQuCgkJJGFjdGl2aXRpZXMgPSBjYl90cmFuc2FjdGlvbl9nZXQoJGFyZ3MpOwoKCQkkcmV0dmFsID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkdHJhbnNhY3Rpb25zWyd0cmFuc2FjdGlvbnMnXSBhcyAkdHJhbnNhY3Rpb24pIHsKCQkJJHJldHZhbFtdID0gJHRoaXMtPnByZXBhcmVfcmVzcG9uc2VfZm9yX2NvbGxlY3Rpb24oCgkJCQkkdGhpcy0+cHJlcGFyZV9pdGVtX2Zvcl9yZXNwb25zZSgkdHJhbnNhY3Rpb24sICRyZXF1ZXN0KQoJCQkpOwoJCX0KCgkJJHJlc3BvbnNlID0gcmVzdF9lbnN1cmVfcmVzcG9uc2UoJHJldHZhbCk7CgkJJHJlc3BvbnNlID0gY2JfcmVzdF9yZXNwb25zZV9hZGRfdG90YWxfaGVhZGVycygkcmVzcG9uc2UsICR0cmFuc2FjdGlvbnNbJ3RvdGFsJ10sICRhcmdzWydwZXJfcGFnZSddKTsKCgkJCgkJZG9fYWN0aW9uKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2dldF9pdGVtcycsICR0cmFuc2FjdGlvbnMsICRyZXNwb25zZSwgJHJlcXVlc3QpOwoKCQlyZXR1cm4gJHJlc3BvbnNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRfaXRlbXNfcGVybWlzc2lvbnNfY2hlY2soJHJlcXVlc3QpCgl7CgkJJHJldHZhbCA9IHRydWU7CgoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ2NiX2VuYWJsZV9wcml2YXRlX25ldHdvcmsnKSAmJiB0cnVlICE9PSBjYl9lbmFibGVfcHJpdmF0ZV9uZXR3b3JrKCkgJiYgIWlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKCQkJJHJldHZhbCA9IG5ldyBXUF9FcnJvcigKCQkJCSdjYl9yZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWQnLAoJCQkJX18oJ1NvcnJ5LCB0aGUgUkVTVCBBUEkgaXMgcmVzdHJpY3RlZCB0byBvbmx5IGxvZ2dlZC1pbiBtZW1iZXJzLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQlhcnJheSgKCQkJCQknc3RhdHVzJyA9PiByZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWRfY29kZSgpLAoJCQkJKQoJCQkpOwoJCX0KCgkJcmV0dXJuIGFwcGx5X2ZpbHRlcnMoJ2NiX3Jlc3RfdHJhbnNhY3Rpb25fZ2V0X2l0ZW1zX3Blcm1pc3Npb25zX2NoZWNrJywgJHJldHZhbCwgJHJlcXVlc3QpOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0X2l0ZW0oJHJlcXVlc3QpCgl7CgkJJHRyYW5zYWN0aW9uID0gJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHJlcXVlc3QpOwoKCQlpZiAoZW1wdHkoJHRyYW5zYWN0aW9uLT5pZCkpIHsKCQkJcmV0dXJuIG5ldyBXUF9FcnJvcigKCQkJCSdjYl9yZXN0X2ludmFsaWRfaWQnLAoJCQkJX18oJ0ludmFsaWQgdHJhbnNhY3Rpb24gSUQuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCWFycmF5KAoJCQkJCSdzdGF0dXMnID0+IDQwNCwKCQkJCSkKCQkJKTsKCQl9CgoJCSRyZXR2YWwgPSAkdGhpcy0+cHJlcGFyZV9yZXNwb25zZV9mb3JfY29sbGVjdGlvbigKCQkJJHRoaXMtPnByZXBhcmVfaXRlbV9mb3JfcmVzcG9uc2UoJHRyYW5zYWN0aW9uLCAkcmVxdWVzdCkKCQkpOwoKCQkkcmVzcG9uc2UgPSByZXN0X2Vuc3VyZV9yZXNwb25zZSgkcmV0dmFsKTsKCgkJZG9fYWN0aW9uKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2dldF9pdGVtJywgJHRyYW5zYWN0aW9uLCAkcmVzcG9uc2UsICRyZXF1ZXN0KTsKCgkJcmV0dXJuICRyZXNwb25zZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0X2l0ZW1fcGVybWlzc2lvbnNfY2hlY2soJHJlcXVlc3QpCgl7CgkJJHJldHZhbCA9IHRydWU7CgoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ2NiX2VuYWJsZV9wcml2YXRlX25ldHdvcmsnKSAmJiB0cnVlICE9PSBjYl9lbmFibGVfcHJpdmF0ZV9uZXR3b3JrKCkgJiYgIWlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKCQkJJHJldHZhbCA9IG5ldyBXUF9FcnJvcigKCQkJCSdjYl9yZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWQnLAoJCQkJX18oJ1NvcnJ5LCBSRVNUIEFQSSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCB0byBsb2dnZWQtaW4gbWVtYmVycyBvbmx5LicsICdjb25mZXR0aS1iaXRzJyksCgkJCQlhcnJheSgKCQkJCQknc3RhdHVzJyA9PiByZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWRfY29kZSgpLAoJCQkJKQoJCQkpOwoJCX0KCgkJaWYgKHRydWUgPT09ICRyZXR2YWwgJiYgISR0aGlzLT5jYW5fc2VlKCRyZXF1ZXN0KSkgewoJCQkkcmV0dmFsID0gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfYXV0aG9yaXphdGlvbl9yZXF1aXJlZCcsCgkJCQlfXygnU29ycnksIHlvdSBjYW5ub3QgdmlldyBDb25mZXR0aSBCaXRzIHRyYW5zYWN0aW9ucy4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gcmVzdF9hdXRob3JpemF0aW9uX3JlcXVpcmVkX2NvZGUoKSwKCQkJCSkKCQkJKTsKCQl9CgoJCXJldHVybiBhcHBseV9maWx0ZXJzKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2dldF9pdGVtX3Blcm1pc3Npb25zX2NoZWNrJywgJHJldHZhbCwgJHJlcXVlc3QpOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlX2l0ZW0oJHJlcXVlc3QpCgl7CgkJJHJlcXVlc3QtPnNldF9wYXJhbSgnY29udGV4dCcsICdlZGl0Jyk7CgoJCWlmICh0cnVlID09PSAkdGhpcy0+Y2JfcmVzdF90cmFuc2FjdGlvbl9jb250ZW50X3ZhbGlkYXRlKCRyZXF1ZXN0KSkgewoJCQlyZXR1cm4gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfY3JlYXRlX3RyYW5zYWN0aW9uX2VtcHR5X2NvbnRlbnQnLAoJCQkJX18oJ1BsZWFzZSBlbnRlciBhIGxvZyBlbnRyeS4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gNDAwLAoJCQkJKQoJCQkpOwoJCX0KCgkJJHByZXBhcmVkX3RyYW5zYWN0aW9uID0gJHRoaXMtPnByZXBhcmVfaXRlbV9mb3JfZGF0YWJhc2UoJHJlcXVlc3QpOwoKCQlpZiAoIWlzc2V0KCRyZXF1ZXN0WydoaWRkZW4nXSkgJiYgaXNzZXQoJHByZXBhcmVkX3RyYW5zYWN0aW9uLT5oaWRlX3NpdGV3aWRlKSkgewoJCQkkcmVxdWVzdFsnaGlkZGVuJ10gPSAkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPmhpZGVfc2l0ZXdpZGU7CgkJfQoKCQkkdHlwZSA9ICd0cmFuc2FjdGlvbl91cGRhdGUnOwoJCWlmICghZW1wdHkoJHJlcXVlc3RbJ3R5cGUnXSkpIHsKCQkJJHR5cGUgPSAkcmVxdWVzdFsndHlwZSddOwoJCX0KCgkJJHByaW1lID0gJHJlcXVlc3RbJ3ByaW1hcnlfaXRlbV9pZCddOwoJCSR0cmFuc2FjdGlvbl9pZCA9IDA7CgoJCSR0cmFuc2FjdGlvbl9pZCA9IGNiX3RyYW5zYWN0aW9uX2NyZWF0ZSgkcHJlcGFyZWRfdHJhbnNhY3Rpb24pOwoKCQlpZiAoIWlzX251bWVyaWMoJHRyYW5zYWN0aW9uX2lkKSkgewoJCQlyZXR1cm4gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfdXNlcl9jYW5ub3RfY3JlYXRlX3RyYW5zYWN0aW9uJywKCQkJCV9fKCdDYW5ub3QgY3JlYXRlIG5ldyB0cmFuc2FjdGlvbi4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gNTAwLAoJCQkJKQoJCQkpOwoJCX0KCgkJJHRyYW5zYWN0aW9uID0gY2JfdHJhbnNhY3Rpb25fZ2V0X3NwZWNpZmljKAoJCQlhcnJheSgKCQkJCSd0cmFuc2FjdGlvbl9pZHMnID0+IGFycmF5KCR0cmFuc2FjdGlvbl9pZCksCgkJCSkKCQkpOwoKCQkkdHJhbnNhY3Rpb24gPSBjdXJyZW50KCR0cmFuc2FjdGlvblsndHJhbnNhY3Rpb25zJ10pOwoJCSRmaWVsZHNfdXBkYXRlID0gJHRoaXMtPnVwZGF0ZV9hZGRpdGlvbmFsX2ZpZWxkc19mb3Jfb2JqZWN0KCR0cmFuc2FjdGlvbiwgJHJlcXVlc3QpOwoKCQlpZiAoaXNfd3BfZXJyb3IoJGZpZWxkc191cGRhdGUpKSB7CgkJCXJldHVybiAkZmllbGRzX3VwZGF0ZTsKCQl9CgoJCSRyZXR2YWwgPSAkdGhpcy0+cHJlcGFyZV9yZXNwb25zZV9mb3JfY29sbGVjdGlvbigKCQkJJHRoaXMtPnByZXBhcmVfaXRlbV9mb3JfcmVzcG9uc2UoJHRyYW5zYWN0aW9uLCAkcmVxdWVzdCkKCQkpOwoKCQkkcmVzcG9uc2UgPSByZXN0X2Vuc3VyZV9yZXNwb25zZSgkcmV0dmFsKTsKCgkJZG9fYWN0aW9uKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2NyZWF0ZV9pdGVtJywgJHRyYW5zYWN0aW9uLCAkcmVzcG9uc2UsICRyZXF1ZXN0KTsKCgkJcmV0dXJuICRyZXNwb25zZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlX2l0ZW1fcGVybWlzc2lvbnNfY2hlY2soJHJlcXVlc3QpCgl7CgkJJHJldHZhbCA9IHRydWU7CgoJCWlmICghaXNfdXNlcl9sb2dnZWRfaW4oKSkgewoJCQkkcmV0dmFsID0gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfYXV0aG9yaXphdGlvbl9yZXF1aXJlZCcsCgkJCQlfXygnU29ycnksIHlvdSBhcmUgbm90IGFsbG93ZWQgdG8gY3JlYXRlIHRyYW5zYWN0aW9ucy4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gcmVzdF9hdXRob3JpemF0aW9uX3JlcXVpcmVkX2NvZGUoKSwKCQkJCSkKCQkJKTsKCQl9CgoJCXJldHVybiBhcHBseV9maWx0ZXJzKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2NyZWF0ZV9pdGVtX3Blcm1pc3Npb25zX2NoZWNrJywgJHJldHZhbCwgJHJlcXVlc3QpOwoJfQoKCS8qKgoJICogVXBkYXRlIGEgdHJhbnNhY3Rpb24uCgkgKgoJICogQHBhcmFtIFdQX1JFU1RfUmVxdWVzdCAkcmVxdWVzdCBGdWxsIGRldGFpbHMgYWJvdXQgdGhlIHJlcXVlc3QuCgkgKgoJICogQHJldHVybiBXUF9SRVNUX1Jlc3BvbnNlIHwgV1BfRXJyb3IKCSAqIEBzaW5jZSAwLjEuMAoJICoKCSAqIEBhcGkge1BBVENIfSAvd3AtanNvbi9jb25mZXR0aS1iaXRzL3YxL3RyYW5zYWN0aW9uLzppZCBVcGRhdGUgdHJhbnNhY3Rpb24KCSAqIEBhcGlOYW1lIFVwZGF0ZUNCVHJhbnNhY3Rpb24KCSAqIEBhcGlHcm91cCBUcmFuc2FjdGlvbnMKCSAqIEBhcGlEZXNjcmlwdGlvbiBVcGRhdGUgc2luZ2xlIHRyYW5zYWN0aW9uCgkgKiBAYXBpVmVyc2lvbiAxLjAuMAoJICogQGFwaVBlcm1pc3Npb24gTG9nZ2VkSW5Vc2VyCgkgKiBAYXBpUGFyYW0ge051bWJlcn0gaWQgQSB1bmlxdWUgbnVtZXJpYyBJRCBmb3IgdGhlIHRyYW5zYWN0aW9uLgoJICogQGFwaVBhcmFtIHtOdW1iZXJ9IFtwcmltYXJ5X2l0ZW1faWRdIFRoZSBJRCBvZiBzb21lIG90aGVyIG9iamVjdCBwcmltYXJpbHkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb25lLgoJICogQGFwaVBhcmFtIHtOdW1iZXJ9IFtzZWNvbmRhcnlfaXRlbV9pZF0gVGhlIElEIG9mIHNvbWUgb3RoZXIgb2JqZWN0IGFsc28gYXNzb2NpYXRlZCB3aXRoIHRoaXMgb25lLgoJICogQGFwaVBhcmFtIHtOdW1iZXJ9IFt1c2VyX2lkXSBUaGUgSUQgZm9yIHRoZSBhdXRob3Igb2YgdGhlIHRyYW5zYWN0aW9uLgoJICogQGFwaVBhcmFtIHtzdHJpbmd9IFtsaW5rXSBUaGUgcGVybWFsaW5rIHRvIHRoaXMgdHJhbnNhY3Rpb24gb24gdGhlIHNpdGUuCgkgKiBAYXBpUGFyYW0ge1N0cmluZz1zZXR0aW5ncyxub3RpZmljYXRpb25zLGdyb3Vwcyxmb3J1bXMsdHJhbnNhY3Rpb24sbWVkaWEsbWVzc2FnZXMsZnJpZW5kcyxpbnZpdGVzLHNlYXJjaCxtZW1iZXJzLHhwcm9maWxlLGJsb2dzfSBbY29tcG9uZW50XSBUaGUgYWN0aXZlIGNvbXBvbmVudCB0aGUgdHJhbnNhY3Rpb24gcmVsYXRlcyB0by4KCSAqIEBhcGlQYXJhbSB7U3RyaW5nPW5ld19tZW1iZXIsbmV3X2F2YXRhcix1cGRhdGVkX3Byb2ZpbGUsdHJhbnNhY3Rpb25fdXBkYXRlLGNyZWF0ZWRfZ3JvdXAsam9pbmVkX2dyb3VwLGdyb3VwX2RldGFpbHNfdXBkYXRlZCxiY2JfdG9waWNfY3JlYXRlLGJjYl9yZXBseV9jcmVhdGUsdHJhbnNhY3Rpb25fY29tbWVudCxmcmllbmRzaGlwX2FjY2VwdGVkLGZyaWVuZHNoaXBfY3JlYXRlZCxuZXdfYmxvZ19wb3N0LG5ld19ibG9nX2NvbW1lbnR9IFt0eXBlXSBUaGUgdHJhbnNhY3Rpb24gdHlwZSBvZiB0aGUgdHJhbnNhY3Rpb24uCgkgKiBAYXBpUGFyYW0ge1N0cmluZ30gW2NvbnRlbnRdIEFsbG93ZWQgSFRNTCBjb250ZW50IGZvciB0aGUgdHJhbnNhY3Rpb24uCgkgKiBAYXBpUGFyYW0ge1N0cmluZ30gW2RhdGVdIFRoZSBkYXRlIHRoZSB0cmFuc2FjdGlvbiB3YXMgcHVibGlzaGVkLCBpbiB0aGUgc2l0ZSdzIHRpbWV6b25lLgoJICogQGFwaVBhcmFtIHtCb29sZWFuPXRydWUsZmFsc2V9IFtoaWRkZW5dIFdoZXRoZXIgdGhlIHRyYW5zYWN0aW9uIG9iamVjdCBzaG91bGQgYmUgc2l0ZXdpZGUgaGlkZGVuIG9yIG5vdC4KCSAqIEBhcGlQYXJhbSB7c3RyaW5nPXB1YmxpYyxsb2dnZWRpbixvbmx5bWUsZnJpZW5kcyxtZWRpYX0gW3ByaXZhY3ldIFByaXZhY3kgb2YgdGhlIHRyYW5zYWN0aW9uLgoJICogQGFwaVBhcmFtIHtBcnJheX0gW2NiX21lZGlhX2lkc10gTWVkaWEgc3BlY2lmaWMgSURzIHdoZW4gTWVkaWEgY29tcG9uZW50IGlzIGVuYWJsZS4KCSAqIEBhcGlQYXJhbSB7QXJyYXl9IFttZWRpYV9naWZdIFNhdmUgZ2lmIGRhdGEgaW50byB0cmFuc2FjdGlvbiB3aGVuIE1lZGlhIGNvbXBvbmVudCBpcyBlbmFibGUuIHBhcmFtKHVybCxtcDQpCgkgKi8KLyovCglwdWJsaWMgZnVuY3Rpb24gdXBkYXRlX2l0ZW0oJHJlcXVlc3QpCgl7CgkJJHJlcXVlc3QtPnNldF9wYXJhbSgnY29udGV4dCcsICdlZGl0Jyk7CgkJJHRyYW5zYWN0aW9uX29iamVjdCA9ICR0aGlzLT5wcmVwYXJlX2l0ZW1fZm9yX2RhdGFiYXNlKCRyZXF1ZXN0KTsKCgkJaWYgKAoJCQkoZW1wdHkoJHRyYW5zYWN0aW9uX29iamVjdC0+Y29udGVudCkKCQkJCS8vJiYgZW1wdHkoY2JfdHJhbnNhY3Rpb25fZ2V0X21ldGEoJHRyYW5zYWN0aW9uX29iamVjdC0+aWQsICdjYl9tZWRpYV9pZHMnLCB0cnVlKSkKCQkJCS8vJiYgZW1wdHkoY2JfdHJhbnNhY3Rpb25fZ2V0X21ldGEoJHRyYW5zYWN0aW9uX29iamVjdC0+aWQsICdfZ2lmX2RhdGEnLCB0cnVlKSkKCQkJKSAmJiB0cnVlID09PSAkdGhpcy0+Y2JfcmVzdF90cmFuc2FjdGlvbl9jb250ZW50X3ZhbGlkYXRlKCRyZXF1ZXN0KQoJCSkgewoJCQlyZXR1cm4gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfdXBkYXRlX3RyYW5zYWN0aW9uX2VtcHR5X2NvbnRlbnQnLAoJCQkJX18oJ1BsZWFzZSwgZW50ZXIgYSBsb2cgZW50cnkuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCWFycmF5KAoJCQkJCSdzdGF0dXMnID0+IDQwMCwKCQkJCSkKCQkJKTsKCQl9CgoJCSR0cmFuc2FjdGlvbl9pZCA9IGNiX3RyYW5zYWN0aW9uX2NyZWF0ZSgkdHJhbnNhY3Rpb25fb2JqZWN0KTsKCgkJaWYgKCFpc19udW1lcmljKCR0cmFuc2FjdGlvbl9pZCkpIHsKCQkJcmV0dXJuIG5ldyBXUF9FcnJvcigKCQkJCSdjYl9yZXN0X3VzZXJfY2Fubm90X3VwZGF0ZV90cmFuc2FjdGlvbicsCgkJCQlfXygnQ2Fubm90IHVwZGF0ZSBleGlzdGluZyB0cmFuc2FjdGlvbi4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gNTAwLAoJCQkJKQoJCQkpOwoJCX0KCgkJJHRyYW5zYWN0aW9uID0gJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHRyYW5zYWN0aW9uX2lkKTsKCQkkZmllbGRzX3VwZGF0ZSA9ICR0aGlzLT51cGRhdGVfYWRkaXRpb25hbF9maWVsZHNfZm9yX29iamVjdCgkdHJhbnNhY3Rpb24sICRyZXF1ZXN0KTsKCgkJaWYgKGlzX3dwX2Vycm9yKCRmaWVsZHNfdXBkYXRlKSkgewoJCQlyZXR1cm4gJGZpZWxkc191cGRhdGU7CgkJfQoKCQkkcmV0dmFsID0gJHRoaXMtPnByZXBhcmVfcmVzcG9uc2VfZm9yX2NvbGxlY3Rpb24oCgkJCSR0aGlzLT5wcmVwYXJlX2l0ZW1fZm9yX3Jlc3BvbnNlKCR0cmFuc2FjdGlvbiwgJHJlcXVlc3QpCgkJKTsKCgkJJHJlc3BvbnNlID0gcmVzdF9lbnN1cmVfcmVzcG9uc2UoJHJldHZhbCk7CgoJCWRvX2FjdGlvbignY2JfcmVzdF90cmFuc2FjdGlvbl91cGRhdGVfaXRlbScsICR0cmFuc2FjdGlvbiwgJHJlc3BvbnNlLCAkcmVxdWVzdCk7CgoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZV9pdGVtX3Blcm1pc3Npb25zX2NoZWNrKCRyZXF1ZXN0KQoJewoJCSRyZXR2YWwgPSB0cnVlOwoKCQlpZiAoIWlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKCQkJJHJldHZhbCA9IG5ldyBXUF9FcnJvcigKCQkJCSdjYl9yZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWQnLAoJCQkJX18oJ1NvcnJ5LCB5b3UgYXJlIG5vdCBhbGxvd2VkIHRvIHVwZGF0ZSB0aGlzIHRyYW5zYWN0aW9uLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQlhcnJheSgKCQkJCQknc3RhdHVzJyA9PiByZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWRfY29kZSgpLAoJCQkJKQoJCQkpOwoJCX0KCgkJJHRyYW5zYWN0aW9uID0gJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHJlcXVlc3QpOwoKCQlpZiAodHJ1ZSA9PT0gJHJldHZhbCAmJiBlbXB0eSgkdHJhbnNhY3Rpb24tPmlkKSkgewoJCQkkcmV0dmFsID0gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfaW52YWxpZF9pZCcsCgkJCQlfXygnSW52YWxpZCB0cmFuc2FjdGlvbiBJRC4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gNDA0LAoJCQkJKQoJCQkpOwoJCX0KCgkJaWYgKHRydWUgPT09ICRyZXR2YWwgJiYgIWNiX3RyYW5zYWN0aW9uX3VzZXJfY2FuX2RlbGV0ZSgkdHJhbnNhY3Rpb24pKSB7CgkJCSRyZXR2YWwgPSBuZXcgV1BfRXJyb3IoCgkJCQknY2JfcmVzdF9hdXRob3JpemF0aW9uX3JlcXVpcmVkJywKCQkJCV9fKCdTb3JyeSwgeW91IGFyZSBub3QgYWxsb3dlZCB0byB1cGRhdGUgdGhpcyB0cmFuc2FjdGlvbi4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gcmVzdF9hdXRob3JpemF0aW9uX3JlcXVpcmVkX2NvZGUoKSwKCQkJCSkKCQkJKTsKCQl9CgoJCXJldHVybiBhcHBseV9maWx0ZXJzKCdjYl9yZXN0X3RyYW5zYWN0aW9uX3VwZGF0ZV9pdGVtX3Blcm1pc3Npb25zX2NoZWNrJywgJHJldHZhbCwgJHJlcXVlc3QpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBkZWxldGVfaXRlbSgkcmVxdWVzdCkKCXsKCQkkcmVxdWVzdC0+c2V0X3BhcmFtKCdjb250ZXh0JywgJ2VkaXQnKTsKCgkJJHRyYW5zYWN0aW9uID0gJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHJlcXVlc3QpOwoJCSRwcmV2aW91cyA9ICR0aGlzLT5wcmVwYXJlX2l0ZW1fZm9yX3Jlc3BvbnNlKCR0cmFuc2FjdGlvbiwgJHJlcXVlc3QpOwoKCQkkcmV0dmFsID0gY2JfdHJhbnNhY3Rpb25fZGVsZXRlKAoJCQlhcnJheSgKCQkJCSdpZCcgPT4gJHRyYW5zYWN0aW9uLT5pZCwKCQkJKQoJCSk7CgoJCWlmICghJHJldHZhbCkgewoJCQlyZXR1cm4gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfdHJhbnNhY3Rpb25fY2Fubm90X2RlbGV0ZScsCgkJCQlfXygnQ291bGQgbm90IGRlbGV0ZSB0aGUgdHJhbnNhY3Rpb24uJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCWFycmF5KAoJCQkJCSdzdGF0dXMnID0+IDUwMCwKCQkJCSkKCQkJKTsKCQl9CgoJCS8vIEJ1aWxkIHRoZSByZXNwb25zZS4KCQkkcmVzcG9uc2UgPSBuZXcgV1BfUkVTVF9SZXNwb25zZSgpOwoJCSRyZXNwb25zZS0+c2V0X2RhdGEoCgkJCWFycmF5KAoJCQkJJ2RlbGV0ZWQnID0+IHRydWUsCgkJCQkncHJldmlvdXMnID0+ICRwcmV2aW91cy0+Z2V0X2RhdGEoKSwKCQkJKQoJCSk7CgoJCWRvX2FjdGlvbignY2JfcmVzdF90cmFuc2FjdGlvbl9kZWxldGVfaXRlbScsICR0cmFuc2FjdGlvbiwgJHJlc3BvbnNlLCAkcmVxdWVzdCk7CgoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZV9pdGVtX3Blcm1pc3Npb25zX2NoZWNrKCRyZXF1ZXN0KQoJewoJCSRyZXR2YWwgPSB0cnVlOwoKCQlpZiAoIWlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKCQkJJHJldHZhbCA9IG5ldyBXUF9FcnJvcigKCQkJCSdjYl9yZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWQnLAoJCQkJX18oJ1NvcnJ5LCB5b3UgYXJlIG5vdCBhbGxvd2VkIHRvIGRlbGV0ZSB0aGlzIHRyYW5zYWN0aW9uLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQlhcnJheSgKCQkJCQknc3RhdHVzJyA9PiByZXN0X2F1dGhvcml6YXRpb25fcmVxdWlyZWRfY29kZSgpLAoJCQkJKQoJCQkpOwoJCX0KCgkJJHRyYW5zYWN0aW9uID0gJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHJlcXVlc3QpOwoKCQlpZiAodHJ1ZSA9PT0gJHJldHZhbCAmJiBlbXB0eSgkdHJhbnNhY3Rpb24tPmlkKSkgewoJCQkkcmV0dmFsID0gbmV3IFdQX0Vycm9yKAoJCQkJJ2NiX3Jlc3RfaW52YWxpZF9pZCcsCgkJCQlfXygnSW52YWxpZCB0cmFuc2FjdGlvbiBJRC4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gNDA0LAoJCQkJKQoJCQkpOwoJCX0KCgkJaWYgKHRydWUgPT09ICRyZXR2YWwgJiYgIWNiX3RyYW5zYWN0aW9uX3VzZXJfY2FuX2RlbGV0ZSgkdHJhbnNhY3Rpb24pKSB7CgkJCSRyZXR2YWwgPSBuZXcgV1BfRXJyb3IoCgkJCQknY2JfcmVzdF9hdXRob3JpemF0aW9uX3JlcXVpcmVkJywKCQkJCV9fKCdTb3JyeSwgeW91IGFyZSBub3QgYWxsb3dlZCB0byBkZWxldGUgdGhpcyB0cmFuc2FjdGlvbi4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJYXJyYXkoCgkJCQkJJ3N0YXR1cycgPT4gcmVzdF9hdXRob3JpemF0aW9uX3JlcXVpcmVkX2NvZGUoKSwKCQkJCSkKCQkJKTsKCQl9CgoJCXJldHVybiBhcHBseV9maWx0ZXJzKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2RlbGV0ZV9pdGVtX3Blcm1pc3Npb25zX2NoZWNrJywgJHJldHZhbCwgJHJlcXVlc3QpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJfaXRlbSgkdHJhbnNhY3Rpb24pCgl7CgkJJHJlbmRlcmVkID0gJyc7CgoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb24tPmNvbnRlbnQpKSB7CgkJCXJldHVybiAkcmVuZGVyZWQ7CgkJfQoKCQkvLyBEbyBub3QgdHJ1bmNhdGUgYWN0aXZpdGllcy4KCQlhZGRfZmlsdGVyKCdjYl90cmFuc2FjdGlvbl9tYXliZV90cnVuY2F0ZV9lbnRyeScsICdfX3JldHVybl9mYWxzZScpOwoJCSR0cmFuc2FjdGlvbnNfdGVtcGxhdGUgPSBudWxsOwoKCQlpZiAoaXNzZXQoJEdMT0JBTFNbJ3RyYW5zYWN0aW9uc190ZW1wbGF0ZSddKSkgewoJCQkkdHJhbnNhY3Rpb25zX3RlbXBsYXRlID0gJEdMT0JBTFNbJ3RyYW5zYWN0aW9uc190ZW1wbGF0ZSddOwoJCX0KCgkJJEdMT0JBTFNbJ3RyYW5zYWN0aW9uc190ZW1wbGF0ZSddID0gbmV3IHN0ZENsYXNzKCk7CgkJJEdMT0JBTFNbJ3RyYW5zYWN0aW9uc190ZW1wbGF0ZSddLT50cmFuc2FjdGlvbiA9ICR0cmFuc2FjdGlvbjsKCgkJLy8gY2JfdHJhbnNhY3Rpb25fZW1iZWQoKTsKCgkJJHJlbmRlcmVkID0gYXBwbHlfZmlsdGVyc19yZWZfYXJyYXkoCgkJCSdjYl9nZXRfdHJhbnNhY3Rpb25fY29udGVudF9ib2R5JywKCQkJYXJyYXkoCgkJCQkkdHJhbnNhY3Rpb24tPmNvbnRlbnQsCgkJCQkmJHRyYW5zYWN0aW9uLAoJCQkpCgkJKTsKCgkJJEdMT0JBTFNbJ3RyYW5zYWN0aW9uc190ZW1wbGF0ZSddID0gJHRyYW5zYWN0aW9uc190ZW1wbGF0ZTsKCgkJLy8gUmVzdG9yZSB0aGUgZmlsdGVyIHRvIHRydW5jYXRlIGFjdGl2aXRpZXMuCgkJcmVtb3ZlX2ZpbHRlcignY2JfdHJhbnNhY3Rpb25fbWF5YmVfdHJ1bmNhdGVfZW50cnknLCAnX19yZXR1cm5fZmFsc2UnKTsKCgkJcmV0dXJuICRyZW5kZXJlZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gcHJlcGFyZV9pdGVtX2Zvcl9yZXNwb25zZSgkdHJhbnNhY3Rpb24sICRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkdHJhbnNhY3Rpb25zX3RlbXBsYXRlOwoJCSR0cmFuc2FjdGlvbnNfdGVtcGxhdGUgPSBuZXcgXHN0ZENsYXNzKCk7CgkJJHRyYW5zYWN0aW9uc190ZW1wbGF0ZS0+ZGlzYWJsZV9ibG9nZm9ydW1fcmVwbGllcyA9IChib29sKSBjYl9jb3JlX2dldF9yb290X29wdGlvbignY2ItZGlzYWJsZS1ibG9nZm9ydW0tY29tbWVudHMnKTsKCQkkdHJhbnNhY3Rpb25zX3RlbXBsYXRlLT50cmFuc2FjdGlvbiA9ICR0cmFuc2FjdGlvbjsKCgkJJGRhdGEgPSBhcnJheSgKCQkJJ3VzZXJfaWQnID0+ICR0cmFuc2FjdGlvbi0+dXNlcl9pZCwKCQkJJ25hbWUnID0+IGNiX2NvcmVfZ2V0X3VzZXJfZGlzcGxheW5hbWUoJHRyYW5zYWN0aW9uLT51c2VyX2lkKSwKCQkJJ2NvbXBvbmVudCcgPT4gJHRyYW5zYWN0aW9uLT5jb21wb25lbnQsCgkJCSdjb250ZW50JyA9PiBhcnJheSgKCQkJCSdyYXcnID0+ICR0cmFuc2FjdGlvbi0+Y29udGVudCwKCQkJCSdyZW5kZXJlZCcgPT4gJHRoaXMtPnJlbmRlcl9pdGVtKCR0cmFuc2FjdGlvbiksCgkJCSksCgkJCSdkYXRlJyA9PiBjYl9yZXN0X3ByZXBhcmVfZGF0ZV9yZXNwb25zZSgkdHJhbnNhY3Rpb24tPmRhdGVfcmVjb3JkZWQpLAoJCQknaWQnID0+ICR0cmFuc2FjdGlvbi0+aWQsCgkJCSdsaW5rJyA9PiBjYl90cmFuc2FjdGlvbl9nZXRfcGVybWFsaW5rKCR0cmFuc2FjdGlvbi0+aWQpLAoJCQkncHJpbWFyeV9pdGVtX2lkJyA9PiAkdHJhbnNhY3Rpb24tPml0ZW1faWQsCgkJCSdzZWNvbmRhcnlfaXRlbV9pZCcgPT4gJHRyYW5zYWN0aW9uLT5zZWNvbmRhcnlfaXRlbV9pZCwKCQkJJ3RpdGxlJyA9PiAkdHJhbnNhY3Rpb24tPmFjdGlvbiwKCQkJJ3R5cGUnID0+ICR0cmFuc2FjdGlvbi0+dHlwZSwKCgkJCSdjYW5fZGVsZXRlJyA9PiBjYl90cmFuc2FjdGlvbl91c2VyX2Nhbl9kZWxldGUoJHRyYW5zYWN0aW9uKSwKCQkJJ2NvbnRlbnRfc3RyaXBwZWQnID0+IGh0bWxfZW50aXR5X2RlY29kZSh3cF9zdHJpcF9hbGxfdGFncygkdHJhbnNhY3Rpb24tPmNvbnRlbnQpKSwKCQkpOwoKCQkvLyBHZXQgaXRlbSBzY2hlbWEuCgkJJHNjaGVtYSA9ICR0aGlzLT5nZXRfaXRlbV9zY2hlbWEoKTsKCgkJaWYgKCFlbXB0eSgkc2NoZW1hWydwcm9wZXJ0aWVzJ11bJ3VzZXJfYXZhdGFyJ10pKSB7CgkJCSRkYXRhWyd1c2VyX2F2YXRhciddID0gYXJyYXkoCgkJCQknZnVsbCcgPT4gY2JfY29yZV9mZXRjaF9hdmF0YXIoCgkJCQkJYXJyYXkoCgkJCQkJCSdpdGVtX2lkJyA9PiAkdHJhbnNhY3Rpb24tPnVzZXJfaWQsCgkJCQkJCSdodG1sJyA9PiBmYWxzZSwKCQkJCQkJJ3R5cGUnID0+ICdmdWxsJywKCQkJCQkpCgkJCQkpLAoKCQkJCSd0aHVtYicgPT4gY2JfY29yZV9mZXRjaF9hdmF0YXIoCgkJCQkJYXJyYXkoCgkJCQkJCSdpdGVtX2lkJyA9PiAkdHJhbnNhY3Rpb24tPnVzZXJfaWQsCgkJCQkJCSdodG1sJyA9PiBmYWxzZSwKCQkJCQkpCgkJCQkpLAoJCQkpOwoJCX0KCgkJJGNvbnRleHQgPSAhZW1wdHkoJHJlcXVlc3RbJ2NvbnRleHQnXSkgPyAkcmVxdWVzdFsnY29udGV4dCddIDogJ3ZpZXcnOwoJCSRkYXRhID0gJHRoaXMtPmFkZF9hZGRpdGlvbmFsX2ZpZWxkc190b19vYmplY3QoJGRhdGEsICRyZXF1ZXN0KTsKCQkkZGF0YSA9ICR0aGlzLT5maWx0ZXJfcmVzcG9uc2VfYnlfY29udGV4dCgkZGF0YSwgJGNvbnRleHQpOwoKCQkkcmVzcG9uc2UgPSByZXN0X2Vuc3VyZV9yZXNwb25zZSgkZGF0YSk7CgkJJHJlc3BvbnNlLT5hZGRfbGlua3MoJHRoaXMtPnByZXBhcmVfbGlua3MoJHRyYW5zYWN0aW9uKSk7CgoJCXJldHVybiBhcHBseV9maWx0ZXJzKCdjYl9yZXN0X3RyYW5zYWN0aW9uX3ByZXBhcmVfdmFsdWUnLCAkcmVzcG9uc2UsICRyZXF1ZXN0LCAkdHJhbnNhY3Rpb24pOwoJfQoKCgkvKioKCSAqIFByZXBhcmUgYW4gdHJhbnNhY3Rpb24gZm9yIGNyZWF0ZSBvciB1cGRhdGUuCgkgKgoJICogQHBhcmFtIFdQX1JFU1RfUmVxdWVzdCAkcmVxdWVzdCBSZXF1ZXN0IG9iamVjdC4KCSAqCgkgKiBAcmV0dXJuIHN0ZENsYXNzfFdQX0Vycm9yIE9iamVjdCBvciBXUF9FcnJvci4KCSAqIEBzaW5jZSAwLjEuMAoJICovCgovKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwcmVwYXJlX2l0ZW1fZm9yX2RhdGFiYXNlKCRyZXF1ZXN0KQoJewoJCSRwcmVwYXJlZF90cmFuc2FjdGlvbiA9IG5ldyBzdGRDbGFzcygpOwoJCSRzY2hlbWEgPSAkdGhpcy0+Z2V0X2l0ZW1fc2NoZW1hKCk7CgkJJHRyYW5zYWN0aW9uID0gJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHJlcXVlc3QpOwoKCQlpZiAoIWVtcHR5KCRzY2hlbWFbJ3Byb3BlcnRpZXMnXVsnaWQnXSkgJiYgIWVtcHR5KCR0cmFuc2FjdGlvbi0+aWQpKSB7CgkJCSRwcmVwYXJlZF90cmFuc2FjdGlvbiA9ICR0cmFuc2FjdGlvbjsKCQkJJHByZXBhcmVkX3RyYW5zYWN0aW9uLT5pZCA9ICR0cmFuc2FjdGlvbi0+aWQ7CgkJfQoKCQkvLyB0cmFuc2FjdGlvbiB1c2VyIElELgoJCWlmICghZW1wdHkoJHNjaGVtYVsncHJvcGVydGllcyddWyd1c2VyX2lkJ10pICYmIGlzc2V0KCRyZXF1ZXN0Wyd1c2VyX2lkJ10pKSB7CgkJCSRwcmVwYXJlZF90cmFuc2FjdGlvbi0+dXNlcl9pZCA9IChpbnQpICRyZXF1ZXN0Wyd1c2VyX2lkJ107CgkJfSBlbHNlIHsKCQkJJHByZXBhcmVkX3RyYW5zYWN0aW9uLT51c2VyX2lkID0gZ2V0X2N1cnJlbnRfdXNlcl9pZCgpOwoJCX0KCgkJLy8gdHJhbnNhY3Rpb24gY29tcG9uZW50LgoJCWlmICghZW1wdHkoJHNjaGVtYVsncHJvcGVydGllcyddWydjb21wb25lbnQnXSkgJiYgaXNzZXQoJHJlcXVlc3RbJ2NvbXBvbmVudCddKSkgewoJCQkkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPmNvbXBvbmVudCA9ICRyZXF1ZXN0Wydjb21wb25lbnQnXTsKCQl9IGVsc2UgewoJCQkkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPmNvbXBvbmVudCA9IENvbmZldHRpX0JpdHMoKS0+dHJhbnNhY3Rpb25zLT5pZDsKCQl9CgoJCS8vIHRyYW5zYWN0aW9uIEl0ZW0gSUQuCgkJaWYgKCFlbXB0eSgkc2NoZW1hWydwcm9wZXJ0aWVzJ11bJ3ByaW1hcnlfaXRlbV9pZCddKSAmJiBpc3NldCgkcmVxdWVzdFsncHJpbWFyeV9pdGVtX2lkJ10pKSB7CgkJCSRpdGVtX2lkID0gKGludCkgJHJlcXVlc3RbJ3ByaW1hcnlfaXRlbV9pZCddOwoJCQkkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPml0ZW1faWQgPSAkaXRlbV9pZDsKCQl9CgoJCS8vIFNlY29uZGFyeSBJdGVtIElELgoJCWlmICghZW1wdHkoJHNjaGVtYVsncHJvcGVydGllcyddWydzZWNvbmRhcnlfaXRlbV9pZCddKSAmJiBpc3NldCgkcmVxdWVzdFsnc2Vjb25kYXJ5X2l0ZW1faWQnXSkpIHsKCQkJJHByZXBhcmVkX3RyYW5zYWN0aW9uLT5zZWNvbmRhcnlfaXRlbV9pZCA9IChpbnQpICRyZXF1ZXN0WydzZWNvbmRhcnlfaXRlbV9pZCddOwoJCX0KCgkJLy8gdHJhbnNhY3Rpb24gdHlwZS4KCQlpZiAoIWVtcHR5KCRzY2hlbWFbJ3Byb3BlcnRpZXMnXVsndHlwZSddKSAmJiBpc3NldCgkcmVxdWVzdFsndHlwZSddKSkgewoJCQkkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPnR5cGUgPSAkcmVxdWVzdFsndHlwZSddOwoJCX0KCgkJLy8gdHJhbnNhY3Rpb24gY29udGVudC4KCQlpZiAoIWVtcHR5KCRzY2hlbWFbJ3Byb3BlcnRpZXMnXVsnY29udGVudCddKSAmJiBpc3NldCgkcmVxdWVzdFsnY29udGVudCddKSkgewoJCQlpZiAoaXNfc3RyaW5nKCRyZXF1ZXN0Wydjb250ZW50J10pKSB7CgkJCQkkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPmNvbnRlbnQgPSAkcmVxdWVzdFsnY29udGVudCddOwoJCQl9IGVsc2VpZiAoaXNzZXQoJHJlcXVlc3RbJ2NvbnRlbnQnXVsncmF3J10pKSB7CgkJCQkkcHJlcGFyZWRfdHJhbnNhY3Rpb24tPmNvbnRlbnQgPSAkcmVxdWVzdFsnY29udGVudCddWydyYXcnXTsKCQkJfQoJCX0KCgkJcmV0dXJuIGFwcGx5X2ZpbHRlcnMoJ2NiX3Jlc3RfdHJhbnNhY3Rpb25fcHJlX2luc2VydF92YWx1ZScsICRwcmVwYXJlZF90cmFuc2FjdGlvbiwgJHJlcXVlc3QpOwoJfQoKCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJlcGFyZV9saW5rcygkdHJhbnNhY3Rpb24pCgl7CgkJJGJhc2UgPSBzcHJpbnRmKCcvJXMvJXMvJywgJHRoaXMtPm5hbWVzcGFjZSwgJHRoaXMtPnJlc3RfYmFzZSk7CgkJJHVybCA9ICRiYXNlIC4gJHRyYW5zYWN0aW9uLT5pZDsKCgkJLy8gRW50aXR5IG1ldGEuCgkJJGxpbmtzID0gYXJyYXkoCgkJCSdzZWxmJyA9PiBhcnJheSgKCQkJCSdocmVmJyA9PiByZXN0X3VybCgkdXJsKSwKCQkJKSwKCQkJJ2NvbGxlY3Rpb24nID0+IGFycmF5KAoJCQkJJ2hyZWYnID0+IHJlc3RfdXJsKCRiYXNlKSwKCQkJKSwKCQkJJ3VzZXInID0+IGFycmF5KAoJCQkJJ2hyZWYnID0+IHJlc3RfdXJsKGNiX3Jlc3RfZ2V0X3VzZXJfdXJsKCR0cmFuc2FjdGlvbi0+dXNlcl9pZCkpLAoJCQkJJ2VtYmVkZGFibGUnID0+IHRydWUsCgkJCSksCgkJKTsKCgkJCgkJcmV0dXJuIGFwcGx5X2ZpbHRlcnMoJ2NiX3Jlc3RfdHJhbnNhY3Rpb25fcHJlcGFyZV9saW5rcycsICRsaW5rcywgJHRyYW5zYWN0aW9uKTsKCX0KCglwcm90ZWN0ZWQgZnVuY3Rpb24gY2FuX3NlZSgkcmVxdWVzdCkKCXsKCQlyZXR1cm4gY2JfdHJhbnNhY3Rpb25fdXNlcl9jYW5fcmVhZCgKCQkJJHRoaXMtPmdldF90cmFuc2FjdGlvbl9vYmplY3QoJHJlcXVlc3QpLAoJCQlicF9sb2dnZWRpbl91c2VyX2lkKCkKCQkpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRfdHJhbnNhY3Rpb25fb2JqZWN0KCRyZXF1ZXN0KQoJewoJCSR0cmFuc2FjdGlvbl9pZCA9IGlzX251bWVyaWMoJHJlcXVlc3QpID8gJHJlcXVlc3QgOiAoaW50KSAkcmVxdWVzdFsnaWQnXTsKCgkJJHRyYW5zYWN0aW9uID0gY2JfdHJhbnNhY3Rpb25fZ2V0X3NwZWNpZmljKAoJCQlhcnJheSgKCQkJCSd0cmFuc2FjdGlvbl9pZHMnID0+IGFycmF5KCR0cmFuc2FjdGlvbl9pZCksCgkJCSkKCQkpOwoKCQlpZiAoaXNfYXJyYXkoJHRyYW5zYWN0aW9uKSAmJiAhZW1wdHkoJHRyYW5zYWN0aW9uWyd0cmFuc2FjdGlvbnMnXVswXSkpIHsKCQkJcmV0dXJuICR0cmFuc2FjdGlvblsndHJhbnNhY3Rpb25zJ11bMF07CgkJfQoKCQlyZXR1cm4gJyc7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldF9lbmRwb2ludF9hcmdzX2Zvcl9pdGVtX3NjaGVtYSgkbWV0aG9kID0gV1BfUkVTVF9TZXJ2ZXI6OkNSRUFUQUJMRSkKCXsKCQkkYXJncyA9IFdQX1JFU1RfQ29udHJvbGxlcjo6Z2V0X2VuZHBvaW50X2FyZ3NfZm9yX2l0ZW1fc2NoZW1hKCRtZXRob2QpOwoJCSRrZXkgPSAnZ2V0X2l0ZW0nOwoKCQlpZiAoV1BfUkVTVF9TZXJ2ZXI6OkNSRUFUQUJMRSA9PT0gJG1ldGhvZCB8fCBXUF9SRVNUX1NlcnZlcjo6RURJVEFCTEUgPT09ICRtZXRob2QpIHsKCQkJJGtleSA9ICdjcmVhdGVfaXRlbSc7CgkJCSRhcmdzWydjb250ZW50J11bJ3R5cGUnXSA9ICdzdHJpbmcnOwoJCQl1bnNldCgkYXJnc1snY29udGVudCddWydwcm9wZXJ0aWVzJ10pOwoKCQkJaWYgKFdQX1JFU1RfU2VydmVyOjpFRElUQUJMRSA9PT0gJG1ldGhvZCkgewoJCQkJJGtleSA9ICd1cGRhdGVfaXRlbSc7CgkJCX0KCQl9IGVsc2VpZiAoV1BfUkVTVF9TZXJ2ZXI6OkRFTEVUQUJMRSA9PT0gJG1ldGhvZCkgewoJCQkka2V5ID0gJ2RlbGV0ZV9pdGVtJzsKCQl9CgkJcmV0dXJuIGFwcGx5X2ZpbHRlcnMoImNiX3Jlc3RfdHJhbnNhY3Rpb25feyRrZXl9X3F1ZXJ5X2FyZ3VtZW50cyIsICRhcmdzLCAkbWV0aG9kKTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldF9pdGVtX3NjaGVtYSgpCgl7CgkJJHNjaGVtYSA9IGFycmF5KAoJCQknJHNjaGVtYScgPT4gJ2h0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDQvc2NoZW1hIycsCgkJCSd0aXRsZScgPT4gJ2NiX3RyYW5zYWN0aW9uJywKCQkJJ3R5cGUnID0+ICdvYmplY3QnLAoJCQkncHJvcGVydGllcycgPT4gYXJyYXkoCgkJCQknaWQnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnQSB1bmlxdWUgbnVtZXJpYyBJRCBmb3IgdGhlIHRyYW5zYWN0aW9uLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJJ3JlYWRvbmx5JyA9PiB0cnVlLAoJCQkJCSd0eXBlJyA9PiAnaW50ZWdlcicsCgkJCQkpLAoJCQkJJ3ByaW1hcnlfaXRlbV9pZCcgPT4gYXJyYXkoCgkJCQkJJ2NvbnRleHQnID0+IGFycmF5KCdlbWJlZCcsICd2aWV3JywgJ2VkaXQnKSwKCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdUaGUgSUQgb2Ygc29tZSBvdGhlciBvYmplY3QgcHJpbWFyaWx5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIG9uZS4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJCSd0eXBlJyA9PiAnaW50ZWdlcicsCgkJCQkpLAoJCQkJJ3NlY29uZGFyeV9pdGVtX2lkJyA9PiBhcnJheSgKCQkJCQknY29udGV4dCcgPT4gYXJyYXkoJ2VtYmVkJywgJ3ZpZXcnLCAnZWRpdCcpLAoJCQkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ1RoZSBJRCBvZiBzb21lIG90aGVyIG9iamVjdCBhbHNvIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG9uZS4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJCSd0eXBlJyA9PiAnaW50ZWdlcicsCgkJCQkpLAoJCQkJJ3VzZXJfaWQnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnVGhlIElEIGZvciB0aGUgYXV0aG9yIG9mIHRoZSB0cmFuc2FjdGlvbi4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJCSd0eXBlJyA9PiAnaW50ZWdlcicsCgkJCQkpLAoJCQkJJ25hbWUnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnVXNlclwncyBkaXNwbGF5IG5hbWUgZm9yIHRoZSB0cmFuc2FjdGlvbi4nLCAnY29uZmV0dGktYml0cycpLAoJCQkJCSd0eXBlJyA9PiAnc3RyaW5nJywKCQkJCSksCgkJCQknbGluaycgPT4gYXJyYXkoCgkJCQkJJ2NvbnRleHQnID0+IGFycmF5KCdlbWJlZCcsICd2aWV3JywgJ2VkaXQnKSwKCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdUaGUgcGVybWFsaW5rIHRvIHRoaXMgdHJhbnNhY3Rpb24gb24gdGhlIHNpdGUuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCQknZm9ybWF0JyA9PiAndXJpJywKCQkJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCQkpLAoJCQkJJ2NvbXBvbmVudCcgPT4gYXJyYXkoCgkJCQkJJ2NvbnRleHQnID0+IGFycmF5KCdlbWJlZCcsICd2aWV3JywgJ2VkaXQnKSwKCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdUaGUgYWN0aXZlIEJ1ZGR5UHJlc3MgY29tcG9uZW50IHRoZSB0cmFuc2FjdGlvbiByZWxhdGVzIHRvLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJJ3R5cGUnID0+ICdzdHJpbmcnLAoJCQkJCSdlbnVtJyA9PiBhcnJheV9rZXlzKGJ1ZGR5cHJlc3MoKS0+YWN0aXZlX2NvbXBvbmVudHMpLAoJCQkJCSdhcmdfb3B0aW9ucycgPT4gYXJyYXkoCgkJCQkJCSdzYW5pdGl6ZV9jYWxsYmFjaycgPT4gJ3Nhbml0aXplX2tleScsCgkJCQkJKSwKCQkJCSksCgkJCQkndHlwZScgPT4gYXJyYXkoCgkJCQkJJ2NvbnRleHQnID0+IGFycmF5KCdlbWJlZCcsICd2aWV3JywgJ2VkaXQnKSwKCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdUaGUgdHJhbnNhY3Rpb24gdHlwZSBvZiB0aGUgdHJhbnNhY3Rpb24uJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCQkJJ2VudW0nID0+IGFycmF5X2tleXMoY2JfdHJhbnNhY3Rpb25fZ2V0X3R5cGVzKCkpLAoJCQkJCSdhcmdfb3B0aW9ucycgPT4gYXJyYXkoCgkJCQkJCSdzYW5pdGl6ZV9jYWxsYmFjaycgPT4gJ3Nhbml0aXplX2tleScsCgkJCQkJKSwKCQkJCSksCgkJCQkndGl0bGUnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0cmFuc2FjdGlvblwncyB0eXBlIChlZzogVXNlcm5hbWUgcG9zdGVkIGFuIHVwZGF0ZSknLCAnY29uZmV0dGktYml0cycpLAoJCQkJCSd0eXBlJyA9PiAnc3RyaW5nJywKCQkJCQkncmVhZG9ubHknID0+IHRydWUsCgkJCQkJJ2FyZ19vcHRpb25zJyA9PiBhcnJheSgKCQkJCQkJJ3Nhbml0aXplX2NhbGxiYWNrJyA9PiAnc2FuaXRpemVfdGV4dF9maWVsZCcsCgkJCQkJKSwKCQkJCSksCgkJCQknY29udGVudCcgPT4gYXJyYXkoCgkJCQkJJ2NvbnRleHQnID0+IGFycmF5KCdlbWJlZCcsICd2aWV3JywgJ2VkaXQnKSwKCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdBbGxvd2VkIEhUTUwgY29udGVudCBmb3IgdGhlIHRyYW5zYWN0aW9uLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJJ3R5cGUnID0+ICdvYmplY3QnLAoJCQkJCSdhcmdfb3B0aW9ucycgPT4gYXJyYXkoCgkJCQkJCSdzYW5pdGl6ZV9jYWxsYmFjaycgPT4gbnVsbCwKCQkJCQkJLy8gTm90ZTogc2FuaXRpemF0aW9uIGltcGxlbWVudGVkIGluIHNlbGY6OnByZXBhcmVfaXRlbV9mb3JfZGF0YWJhc2UoKS4KCQkJCQkJJ3ZhbGlkYXRlX2NhbGxiYWNrJyA9PiBudWxsLAoJCQkJCQkvLyBOb3RlOiB2YWxpZGF0aW9uIGltcGxlbWVudGVkIGluIHNlbGY6OnByZXBhcmVfaXRlbV9mb3JfZGF0YWJhc2UoKS4KCQkJCQkpLAoJCQkJCSdwcm9wZXJ0aWVzJyA9PiBhcnJheSgKCQkJCQkJJ3JhdycgPT4gYXJyYXkoCgkJCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdDb250ZW50IGZvciB0aGUgdHJhbnNhY3Rpb24sIGFzIGl0IGV4aXN0cyBpbiB0aGUgZGF0YWJhc2UuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCQkJCSd0eXBlJyA9PiAnc3RyaW5nJywKCQkJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAnZWRpdCcpLAoJCQkJCQkpLAoJCQkJCQkncmVuZGVyZWQnID0+IGFycmF5KAoJCQkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnSFRNTCBjb250ZW50IGZvciB0aGUgdHJhbnNhY3Rpb24sIHRyYW5zZm9ybWVkIGZvciBkaXNwbGF5LicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCQkJCQknY29udGV4dCcgPT4gYXJyYXkoJ2VtYmVkJywgJ3ZpZXcnLCAnZWRpdCcpLAoJCQkJCQkJJ3JlYWRvbmx5JyA9PiB0cnVlLAoJCQkJCQkpLAoJCQkJCSksCgkJCQkpLAoJCQkJJ2RhdGUnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygiVGhlIGRhdGUgdGhlIHRyYW5zYWN0aW9uIHdhcyBwdWJsaXNoZWQsIGluIHRoZSBzaXRlJ3MgdGltZXpvbmUuIiwgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCQkJJ2Zvcm1hdCcgPT4gJ2RhdGUtdGltZScsCgkJCQkpLAoJCQkJJ3N0YXR1cycgPT4gYXJyYXkoCgkJCQkJJ2NvbnRleHQnID0+IGFycmF5KCdlbWJlZCcsICd2aWV3JywgJ2VkaXQnKSwKCQkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdXaGV0aGVyIHRoZSB0cmFuc2FjdGlvbiBoYXMgYmVlbiBtYXJrZWQgYXMgc3BhbSBvciBub3QuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCQkJJ2VudW0nID0+IGFycmF5KCdwdWJsaXNoZWQnLCAnc3BhbScpLAoJCQkJCSdyZWFkb25seScgPT4gdHJ1ZSwKCQkJCQknYXJnX29wdGlvbnMnID0+IGFycmF5KAoJCQkJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICdzYW5pdGl6ZV9rZXknLAoJCQkJCSksCgkJCQkpLAoJCQkJJ2Nhbl9kZWxldGUnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnV2hldGhlciBvciBub3QgdXNlciBoYXZlIHRoZSBkZWxldGUgYWNjZXNzIGZvciB0aGUgdHJhbnNhY3Rpb24gb2JqZWN0LicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJJ3R5cGUnID0+ICdib29sZWFuJywKCQkJCQkncmVhZG9ubHknID0+IHRydWUsCgkJCQkpLAoJCQkJJ2NvbnRlbnRfc3RyaXBwZWQnID0+IGFycmF5KAoJCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnQ29udGVudCBmb3IgdGhlIHRyYW5zYWN0aW9uIHdpdGhvdXQgSFRNTCB0YWdzLicsICdjb25mZXR0aS1iaXRzJyksCgkJCQkJJ3R5cGUnID0+ICdzdHJpbmcnLAoJCQkJCSdyZWFkb25seScgPT4gdHJ1ZSwKCQkJCSksCgkJCSksCgkJKTsKCgkJLy8gQXZhdGFycy4KCQlpZiAodHJ1ZSA9PT0gYnVkZHlwcmVzcygpLT5hdmF0YXItPnNob3dfYXZhdGFycykgewoJCQkkYXZhdGFyX3Byb3BlcnRpZXMgPSBhcnJheSgpOwoKCQkJJGF2YXRhcl9wcm9wZXJ0aWVzWydmdWxsJ10gPSBhcnJheSgKCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgoJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBzcHJpbnRmKF9fKCdBdmF0YXIgVVJMIHdpdGggZnVsbCBpbWFnZSBzaXplICglMSRkIHggJTIkZCBwaXhlbHMpLicsICdjb25mZXR0aS1iaXRzJyksIG51bWJlcl9mb3JtYXRfaTE4bihjYl9jb3JlX2F2YXRhcl9mdWxsX3dpZHRoKCkpLCBudW1iZXJfZm9ybWF0X2kxOG4oY2JfY29yZV9hdmF0YXJfZnVsbF9oZWlnaHQoKSkpLAoJCQkJJ3R5cGUnID0+ICdzdHJpbmcnLAoJCQkJJ2Zvcm1hdCcgPT4gJ3VyaScsCgkJCSk7CgoJCQkkYXZhdGFyX3Byb3BlcnRpZXNbJ3RodW1iJ10gPSBhcnJheSgKCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgoJCQkJJ2Rlc2NyaXB0aW9uJyA9PiBzcHJpbnRmKF9fKCdBdmF0YXIgVVJMIHdpdGggdGh1bWIgaW1hZ2Ugc2l6ZSAoJTEkZCB4ICUyJGQgcGl4ZWxzKS4nLCAnY29uZmV0dGktYml0cycpLCBudW1iZXJfZm9ybWF0X2kxOG4oY2JfY29yZV9hdmF0YXJfdGh1bWJfd2lkdGgoKSksIG51bWJlcl9mb3JtYXRfaTE4bihjYl9jb3JlX2F2YXRhcl90aHVtYl9oZWlnaHQoKSkpLAoJCQkJJ3R5cGUnID0+ICdzdHJpbmcnLAoJCQkJJ2Zvcm1hdCcgPT4gJ3VyaScsCgkJCSk7CgoJCQkkc2NoZW1hWydwcm9wZXJ0aWVzJ11bJ3VzZXJfYXZhdGFyJ10gPSBhcnJheSgKCQkJCSdjb250ZXh0JyA9PiBhcnJheSgnZW1iZWQnLCAndmlldycsICdlZGl0JyksCgkJCQknZGVzY3JpcHRpb24nID0+IF9fKCdBdmF0YXIgVVJMcyBmb3IgdGhlIGF1dGhvciBvZiB0aGUgdHJhbnNhY3Rpb24uJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJCSd0eXBlJyA9PiAnb2JqZWN0JywKCQkJCSdyZWFkb25seScgPT4gdHJ1ZSwKCQkJCSdwcm9wZXJ0aWVzJyA9PiAkYXZhdGFyX3Byb3BlcnRpZXMsCgkJCSk7CgkJfQoKCQlyZXR1cm4gYXBwbHlfZmlsdGVycygnY2JfcmVzdF90cmFuc2FjdGlvbl9zY2hlbWEnLCAkdGhpcy0+YWRkX2FkZGl0aW9uYWxfZmllbGRzX3NjaGVtYSgkc2NoZW1hKSk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldF9jb2xsZWN0aW9uX3BhcmFtcygpCgl7CgkJJHBhcmFtcyA9IHBhcmVudDo6Z2V0X2NvbGxlY3Rpb25fcGFyYW1zKCk7CgkJJHBhcmFtc1snY29udGV4dCddWydkZWZhdWx0J10gPSAndmlldyc7CgoJCSRwYXJhbXNbJ2V4Y2x1ZGUnXSA9IGFycmF5KAoJCQknZGVzY3JpcHRpb24nID0+IF9fKCdFbnN1cmUgcmVzdWx0IHNldCBleGNsdWRlcyBzcGVjaWZpYyBJRHMuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJJ2RlZmF1bHQnID0+IGFycmF5KCksCgkJCSd0eXBlJyA9PiAnYXJyYXknLAoJCQknaXRlbXMnID0+IGFycmF5KCd0eXBlJyA9PiAnaW50ZWdlcicpLAoJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICd3cF9wYXJzZV9pZF9saXN0JywKCQkJJ3ZhbGlkYXRlX2NhbGxiYWNrJyA9PiAncmVzdF92YWxpZGF0ZV9yZXF1ZXN0X2FyZycsCgkJKTsKCgkJJHBhcmFtc1snaW5jbHVkZSddID0gYXJyYXkoCgkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ0Vuc3VyZSByZXN1bHQgc2V0IGluY2x1ZGVzIHNwZWNpZmljIElEcy4nLCAnY29uZmV0dGktYml0cycpLAoJCQknZGVmYXVsdCcgPT4gYXJyYXkoKSwKCQkJJ3R5cGUnID0+ICdhcnJheScsCgkJCSdpdGVtcycgPT4gYXJyYXkoJ3R5cGUnID0+ICdpbnRlZ2VyJyksCgkJCSdzYW5pdGl6ZV9jYWxsYmFjaycgPT4gJ3dwX3BhcnNlX2lkX2xpc3QnLAoJCQkndmFsaWRhdGVfY2FsbGJhY2snID0+ICdyZXN0X3ZhbGlkYXRlX3JlcXVlc3RfYXJnJywKCQkpOwoKCQkkcGFyYW1zWydvcmRlciddID0gYXJyYXkoCgkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ09yZGVyIHNvcnQgYXR0cmlidXRlIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nLicsICdjb25mZXR0aS1iaXRzJyksCgkJCSdkZWZhdWx0JyA9PiAnZGVzYycsCgkJCSd0eXBlJyA9PiAnc3RyaW5nJywKCQkJJ2VudW0nID0+IGFycmF5KCdhc2MnLCAnZGVzYycpLAoJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICdzYW5pdGl6ZV9rZXknLAoJCQkndmFsaWRhdGVfY2FsbGJhY2snID0+ICdyZXN0X3ZhbGlkYXRlX3JlcXVlc3RfYXJnJywKCQkpOwoKCQkkcGFyYW1zWydhZnRlciddID0gYXJyYXkoCgkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ0xpbWl0IHJlc3VsdCBzZXQgdG8gaXRlbXMgcHVibGlzaGVkIGFmdGVyIGEgZ2l2ZW4gSVNPODYwMSBjb21wbGlhbnQgZGF0ZS4nLCAnY29uZmV0dGktYml0cycpLAoJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCSdmb3JtYXQnID0+ICdkYXRlLXRpbWUnLAoJCQkndmFsaWRhdGVfY2FsbGJhY2snID0+ICdyZXN0X3ZhbGlkYXRlX3JlcXVlc3RfYXJnJywKCQkpOwoKCQkkcGFyYW1zWyd1c2VyX2lkJ10gPSBhcnJheSgKCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnTGltaXQgcmVzdWx0IHNldCB0byBpdGVtcyBjcmVhdGVkIGJ5IGEgc3BlY2lmaWMgdXNlciAoSUQpLicsICdjb25mZXR0aS1iaXRzJyksCgkJCSdkZWZhdWx0JyA9PiAwLAoJCQkndHlwZScgPT4gJ2ludGVnZXInLAoJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICdhYnNpbnQnLAoJCQkndmFsaWRhdGVfY2FsbGJhY2snID0+ICdyZXN0X3ZhbGlkYXRlX3JlcXVlc3RfYXJnJywKCQkpOwoKCQkkcGFyYW1zWydzdGF0dXMnXSA9IGFycmF5KAoJCQknZGVzY3JpcHRpb24nID0+IF9fKCdMaW1pdCByZXN1bHQgc2V0IHRvIGl0ZW1zIHdpdGggYSBzcGVjaWZpYyBzdGF0dXMuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJJ2RlZmF1bHQnID0+ICdoYW1fb25seScsCgkJCSd0eXBlJyA9PiAnc3RyaW5nJywKCQkJJ2VudW0nID0+IGFycmF5KCdoYW1fb25seScsICdzcGFtX29ubHknLCAnYWxsJyksCgkJCSdzYW5pdGl6ZV9jYWxsYmFjaycgPT4gJ3Nhbml0aXplX2tleScsCgkJCSd2YWxpZGF0ZV9jYWxsYmFjaycgPT4gJ3Jlc3RfdmFsaWRhdGVfcmVxdWVzdF9hcmcnLAoJCSk7CgoJCSRwYXJhbXNbJ3Njb3BlJ10gPSBhcnJheSgKCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnTGltaXQgcmVzdWx0IHNldCB0byBpdGVtcyB3aXRoIGEgc3BlY2lmaWMgc2NvcGUuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJJ3R5cGUnID0+ICdzdHJpbmcnLAoJCQknZW51bScgPT4gYXJyYXkoJ2p1c3QtbWUnLCAnZnJpZW5kcycsICdncm91cHMnLCAnZmF2b3JpdGVzJywgJ21lbnRpb25zJywgJ2ZvbGxvd2luZycpLAoJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICdzYW5pdGl6ZV90ZXh0X2ZpZWxkJywKCQkJJ3ZhbGlkYXRlX2NhbGxiYWNrJyA9PiAncmVzdF92YWxpZGF0ZV9yZXF1ZXN0X2FyZycsCgkJKTsKCgkJJHBhcmFtc1sncHJpbWFyeV9pZCddID0gYXJyYXkoCgkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ0xpbWl0IHJlc3VsdCBzZXQgdG8gaXRlbXMgd2l0aCBhIHNwZWNpZmljIHByaW1lIGFzc29jaWF0aW9uIElELicsICdjb25mZXR0aS1iaXRzJyksCgkJCSdkZWZhdWx0JyA9PiAwLAoJCQkndHlwZScgPT4gJ2ludGVnZXInLAoJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICdhYnNpbnQnLAoJCQkndmFsaWRhdGVfY2FsbGJhY2snID0+ICdyZXN0X3ZhbGlkYXRlX3JlcXVlc3RfYXJnJywKCQkpOwoKCQkkcGFyYW1zWydzZWNvbmRhcnlfaWQnXSA9IGFycmF5KAoJCQknZGVzY3JpcHRpb24nID0+IF9fKCdMaW1pdCByZXN1bHQgc2V0IHRvIGl0ZW1zIHdpdGggYSBzcGVjaWZpYyBzZWNvbmRhcnkgYXNzb2NpYXRpb24gSUQuJywgJ2NvbmZldHRpLWJpdHMnKSwKCQkJJ2RlZmF1bHQnID0+IDAsCgkJCSd0eXBlJyA9PiAnaW50ZWdlcicsCgkJCSdzYW5pdGl6ZV9jYWxsYmFjaycgPT4gJ2Fic2ludCcsCgkJCSd2YWxpZGF0ZV9jYWxsYmFjaycgPT4gJ3Jlc3RfdmFsaWRhdGVfcmVxdWVzdF9hcmcnLAoJCSk7CgoJCSRwYXJhbXNbJ2NvbXBvbmVudCddID0gYXJyYXkoCgkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ0xpbWl0IHJlc3VsdCBzZXQgdG8gaXRlbXMgd2l0aCBhIHNwZWNpZmljIGFjdGl2ZSBCdWRkeVByZXNzIGNvbXBvbmVudC4nLCAnY29uZmV0dGktYml0cycpLAoJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCSdlbnVtJyA9PiBhcnJheV9rZXlzKGJ1ZGR5cHJlc3MoKS0+YWN0aXZlX2NvbXBvbmVudHMpLAoJCQknc2FuaXRpemVfY2FsbGJhY2snID0+ICdzYW5pdGl6ZV9rZXknLAoJCQkndmFsaWRhdGVfY2FsbGJhY2snID0+ICdyZXN0X3ZhbGlkYXRlX3JlcXVlc3RfYXJnJywKCQkpOwoKCQkkcGFyYW1zWyd0eXBlJ10gPSBhcnJheSgKCQkJJ2Rlc2NyaXB0aW9uJyA9PiBfXygnTGltaXQgcmVzdWx0IHNldCB0byBpdGVtcyB3aXRoIGEgc3BlY2lmaWMgdHJhbnNhY3Rpb24gdHlwZS4nLCAnY29uZmV0dGktYml0cycpLAoJCQkndHlwZScgPT4gJ3N0cmluZycsCgkJCSdlbnVtJyA9PiBhcnJheV9rZXlzKGNiX3RyYW5zYWN0aW9uX2dldF90eXBlcygpKSwKCQkJJ3Nhbml0aXplX2NhbGxiYWNrJyA9PiAnc2FuaXRpemVfa2V5JywKCQkJJ3ZhbGlkYXRlX2NhbGxiYWNrJyA9PiAncmVzdF92YWxpZGF0ZV9yZXF1ZXN0X2FyZycsCgkJKTsKCgkJJHBhcmFtc1sncHJpdmFjeSddID0gYXJyYXkoCgkJCSdkZXNjcmlwdGlvbicgPT4gX18oJ1ByaXZhY3kgb2YgdGhlIHRyYW5zYWN0aW9uLicsICdjb25mZXR0aS1iaXRzJyksCgkJCSd0eXBlJyA9PiAnYXJyYXknLAoJCQknaXRlbXMnID0+IGFycmF5KAoJCQkJJ3R5cGUnID0+ICdzdHJpbmcnLAoJCQkJJ2VudW0nID0+IGFycmF5KCdwdWJsaWMnLCAnbG9nZ2VkaW4nLCAnb25seW1lJywgJ2ZyaWVuZHMnLCAnbWVkaWEnKSwKCQkJKSwKCQkJJ3Nhbml0aXplX2NhbGxiYWNrJyA9PiAnY2JfcmVzdF9zYW5pdGl6ZV9zdHJpbmdfbGlzdCcsCgkJCSd2YWxpZGF0ZV9jYWxsYmFjaycgPT4gJ3Jlc3RfdmFsaWRhdGVfcmVxdWVzdF9hcmcnLAoJCSk7CgoJCXJldHVybiBhcHBseV9maWx0ZXJzKCdjYl9yZXN0X3RyYW5zYWN0aW9uX2NvbGxlY3Rpb25fcGFyYW1zJywgJHBhcmFtcyk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldF90cmFuc2FjdGlvbl9mYXZvcml0ZV9jb3VudCgkdHJhbnNhY3Rpb25faWQpCgl7CgoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb25faWQpKSB7CgkJCXJldHVybjsKCQl9CgoJCSRmYXZfY291bnQgPSBjYl90cmFuc2FjdGlvbl9nZXRfbWV0YSgkdHJhbnNhY3Rpb25faWQsICdmYXZvcml0ZV9jb3VudCcsIHRydWUpOwoKCQlyZXR1cm4gKCFlbXB0eSgkZmF2X2NvdW50KSA/ICRmYXZfY291bnQgOiAwKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gY2JfcmVzdF90cmFuc2FjdGlvbl9jb250ZW50X3ZhbGlkYXRlKCRyZXF1ZXN0KQoJewoJCSR0b29sYmFyX29wdGlvbiA9IGZhbHNlOwoKCQlpZiAoIWVtcHR5KCRyZXF1ZXN0Wydjb250ZW50J10pKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXJldHVybiAkdG9vbGJhcl9vcHRpb247Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGNiX3Jlc3RfdHJhbnNhY3Rpb25fZGVmYXVsdF9zY29wZSgkc2NvcGUgPSAnYWxsJywgJHVzZXJfaWQgPSAwKQoJewoJCSRuZXdfc2NvcGUgPSBhcnJheSgpOwoKCQlpZiAoYnBfbG9nZ2VkaW5fdXNlcl9pZCgpICYmICgnYWxsJyA9PT0gJHNjb3BlIHx8IGVtcHR5KCRzY29wZSkpKSB7CgoJCQkkbmV3X3Njb3BlW10gPSAncHVibGljJzsKCgkJCSRuZXdfc2NvcGVbXSA9ICdqdXN0LW1lJzsKCgkJCWlmIChlbXB0eSgkdXNlcl9pZCkpIHsKCQkJCSRuZXdfc2NvcGVbXSA9ICdwdWJsaWMnOwoJCQl9CgkJfSBlbHNlaWYgKCFicF9sb2dnZWRpbl91c2VyX2lkKCkgJiYgKCdhbGwnID09PSAkc2NvcGUgfHwgZW1wdHkoJHNjb3BlKSkpIHsKCQkJJG5ld19zY29wZVtdID0gJ3B1YmxpYyc7CgkJfQoKCQkkbmV3X3Njb3BlID0gYXJyYXlfdW5pcXVlKCRuZXdfc2NvcGUpOwoKCQlpZiAoZW1wdHkoJG5ld19zY29wZSkpIHsKCQkJJG5ld19zY29wZSA9IChhcnJheSkgJHNjb3BlOwoJCX0KCgkJJG5ld19zY29wZSA9IGFwcGx5X2ZpbHRlcnMoJ2NiX3Jlc3RfdHJhbnNhY3Rpb25fZGVmYXVsdF9zY29wZScsICRuZXdfc2NvcGUpOwoKCQlyZXR1cm4gaW1wbG9kZSgnLCcsICRuZXdfc2NvcGUpOwoJfQp9Ci8qLyI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";